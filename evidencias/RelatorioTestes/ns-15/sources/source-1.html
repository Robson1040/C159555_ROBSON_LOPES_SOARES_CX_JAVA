


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > Produto</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">br.gov.caixa.api.investimentos.model.produto</a>
</div>

<h1>Coverage Summary for Class: Produto (br.gov.caixa.api.investimentos.model.produto)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Produto</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (25/25)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    88,5%
  </span>
  <span class="absValue">
    (46/52)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    97,3%
  </span>
  <span class="absValue">
    (72/74)
  </span>
</td>
</tr>
  <tr>
    <td class="name">Produto$HibernateProxy</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (25/25)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    88,5%
  </span>
  <span class="absValue">
    (46/52)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    97,3%
  </span>
  <span class="absValue">
    (72/74)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package br.gov.caixa.api.investimentos.model.produto;
&nbsp;
&nbsp;import io.quarkus.hibernate.orm.panache.PanacheEntityBase;
&nbsp;import jakarta.persistence.*;
&nbsp;import jakarta.validation.constraints.*;
&nbsp;import br.gov.caixa.api.investimentos.enums.simulacao.Indice;
&nbsp;import br.gov.caixa.api.investimentos.enums.produto.NivelRisco;
&nbsp;import br.gov.caixa.api.investimentos.enums.produto.PeriodoRentabilidade;
&nbsp;import br.gov.caixa.api.investimentos.enums.produto.TipoProduto;
&nbsp;import br.gov.caixa.api.investimentos.enums.produto.TipoRentabilidade;
&nbsp;import br.gov.caixa.api.investimentos.validation.ValidRentabilidadeIndice;
&nbsp;
&nbsp;import java.math.BigDecimal;
&nbsp;
&nbsp;@Entity
&nbsp;@Table(name = &quot;produto&quot;)
&nbsp;@ValidRentabilidadeIndice
&nbsp;public class Produto extends PanacheEntityBase {
&nbsp;
&nbsp;    @Id
&nbsp;    @GeneratedValue(strategy = GenerationType.IDENTITY)
&nbsp;    @Column(name = &quot;id&quot;, columnDefinition = &quot;INTEGER&quot;)
&nbsp;    private Long id;
&nbsp;
&nbsp;    @NotBlank(message = &quot;Nome é obrigatório&quot;)
&nbsp;    @Size(min = 2, max = 255, message = &quot;Nome deve ter entre 2 e 255 caracteres&quot;)
&nbsp;    @Column(nullable = false)
&nbsp;    private String nome;
&nbsp;
&nbsp;    @NotNull(message = &quot;Tipo do produto é obrigatório&quot;)
&nbsp;    @Enumerated(EnumType.STRING)
&nbsp;    @Column(name = &quot;tipo&quot;, nullable = false)
&nbsp;    private TipoProduto tipo;
&nbsp;
&nbsp;    @NotNull(message = &quot;Tipo de rentabilidade é obrigatório&quot;)
&nbsp;    @Enumerated(EnumType.STRING)
&nbsp;    @Column(name = &quot;tipo_rentabilidade&quot;, nullable = false)
&nbsp;    private TipoRentabilidade tipoRentabilidade;
&nbsp;
&nbsp;    @NotNull(message = &quot;Rentabilidade é obrigatória&quot;)
&nbsp;    @DecimalMin(value = &quot;0.0&quot;, message = &quot;Rentabilidade deve ser maior ou igual a zero&quot;)
&nbsp;    @Column(precision = 10, scale = 4, nullable = false)
&nbsp;    private BigDecimal rentabilidade;
&nbsp;
&nbsp;    @NotNull(message = &quot;Período de rentabilidade é obrigatório&quot;)
&nbsp;    @Enumerated(EnumType.STRING)
&nbsp;    @Column(name = &quot;periodo_rentabilidade&quot;, nullable = false)
&nbsp;    private PeriodoRentabilidade periodoRentabilidade;
&nbsp;
&nbsp;    @Enumerated(EnumType.STRING)
&nbsp;    @Column(name = &quot;indice&quot;, nullable = true)
&nbsp;    private Indice indice;
&nbsp;
&nbsp;    @NotNull(message = &quot;Liquidez é obrigatória&quot;)
&nbsp;    @Min(value = -1, message = &quot;Liquidez deve ser -1 (sem liquidez) ou &gt;= 0&quot;)
&nbsp;    @Column(name = &quot;liquidez&quot;, nullable = false)
&nbsp;    private Integer liquidez;
&nbsp;
&nbsp;    @NotNull(message = &quot;Mínimo de dias de investimento é obrigatório&quot;)
&nbsp;    @Min(value = 0, message = &quot;Mínimo de dias de investimento deve ser &gt;= 0&quot;)
&nbsp;    @Column(name = &quot;minimo_dias_investimento&quot;, nullable = false)
&nbsp;    private Integer minimoDiasInvestimento;
&nbsp;
&nbsp;    @NotNull(message = &quot;FGC é obrigatório&quot;)
&nbsp;    @Column(name = &quot;fgc&quot;, nullable = false)
&nbsp;    private Boolean fgc;
&nbsp;
&nbsp;    @Transient
&nbsp;    private double pontuacao;
&nbsp;
&nbsp;    // Construtor padrão
&nbsp;    public Produto()
<b class="fc">&nbsp;    {</b>
<b class="fc">&nbsp;        this.pontuacao = 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    // Construtor com parâmetros
&nbsp;    public Produto(String nome, TipoProduto tipo, TipoRentabilidade tipoRentabilidade,
&nbsp;                   BigDecimal rentabilidade, PeriodoRentabilidade periodoRentabilidade,
<b class="fc">&nbsp;                   Indice indice, Integer liquidez, Integer minimoDiasInvestimento, Boolean fgc) {</b>
<b class="fc">&nbsp;        this.nome = nome;</b>
<b class="fc">&nbsp;        this.tipo = tipo;</b>
<b class="fc">&nbsp;        this.tipoRentabilidade = tipoRentabilidade;</b>
<b class="fc">&nbsp;        this.rentabilidade = rentabilidade;</b>
<b class="fc">&nbsp;        this.periodoRentabilidade = periodoRentabilidade;</b>
<b class="fc">&nbsp;        this.indice = indice;</b>
<b class="fc">&nbsp;        this.liquidez = liquidez;</b>
<b class="fc">&nbsp;        this.minimoDiasInvestimento = minimoDiasInvestimento;</b>
<b class="fc">&nbsp;        this.fgc = fgc;</b>
&nbsp;
<b class="fc">&nbsp;        this.pontuacao = 0;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;
&nbsp;    // Getters e Setters
&nbsp;    public Long getId() {
<b class="fc">&nbsp;        return id;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setId(Long id) {
<b class="fc">&nbsp;        this.id = id;</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getNome() {
<b class="fc">&nbsp;        return nome;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setNome(String nome) {
<b class="fc">&nbsp;        this.nome = nome;</b>
&nbsp;    }
&nbsp;
&nbsp;    public TipoProduto getTipo() {
<b class="fc">&nbsp;        return tipo;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setTipo(TipoProduto tipo) {
<b class="fc">&nbsp;        this.tipo = tipo;</b>
&nbsp;    }
&nbsp;
&nbsp;    public TipoRentabilidade getTipoRentabilidade() {
<b class="fc">&nbsp;        return tipoRentabilidade;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setTipoRentabilidade(TipoRentabilidade tipoRentabilidade) {
<b class="fc">&nbsp;        this.tipoRentabilidade = tipoRentabilidade;</b>
&nbsp;    }
&nbsp;
&nbsp;    public BigDecimal getRentabilidade() {
<b class="fc">&nbsp;        return rentabilidade;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setRentabilidade(BigDecimal rentabilidade) {
<b class="fc">&nbsp;        this.rentabilidade = rentabilidade;</b>
&nbsp;    }
&nbsp;
&nbsp;    public PeriodoRentabilidade getPeriodoRentabilidade() {
<b class="fc">&nbsp;        return periodoRentabilidade;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setPeriodoRentabilidade(PeriodoRentabilidade periodoRentabilidade) {
<b class="fc">&nbsp;        this.periodoRentabilidade = periodoRentabilidade;</b>
&nbsp;    }
&nbsp;
&nbsp;    public Indice getIndice() {
<b class="fc">&nbsp;        return indice;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setIndice(Indice indice) {
<b class="fc">&nbsp;        this.indice = indice;</b>
&nbsp;    }
&nbsp;
&nbsp;    public Integer getLiquidez() {
<b class="fc">&nbsp;        return liquidez;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setLiquidez(Integer liquidez) {
<b class="fc">&nbsp;        this.liquidez = liquidez;</b>
&nbsp;    }
&nbsp;
&nbsp;    public Integer getMinimoDiasInvestimento() {
<b class="fc">&nbsp;        return minimoDiasInvestimento;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setMinimoDiasInvestimento(Integer minimoDiasInvestimento) {
<b class="fc">&nbsp;        this.minimoDiasInvestimento = minimoDiasInvestimento;</b>
&nbsp;    }
&nbsp;
&nbsp;    public Boolean getFgc() {
<b class="fc">&nbsp;        return fgc;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setFgc(Boolean fgc) {
<b class="fc">&nbsp;        this.fgc = fgc;</b>
&nbsp;    }
&nbsp;
&nbsp;    public NivelRisco getRisco()
&nbsp;    {
<b class="fc">&nbsp;        if(tipo.equals(TipoProduto.TESOURO_DIRETO))</b>
&nbsp;        {
<b class="fc">&nbsp;            return NivelRisco.BAIXO;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if(tipo.equals(TipoProduto.POUPANCA)){</b>
<b class="fc">&nbsp;            return NivelRisco.BAIXO;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if(tipo.equals(TipoProduto.ACAO) || tipo.equals(TipoProduto.FUNDO)){</b>
<b class="fc">&nbsp;            return NivelRisco.ALTO;</b>
&nbsp;        }
&nbsp;
<b class="pc">&nbsp;        if(tipo.equals(TipoProduto.CDB) &amp;&amp; Boolean.TRUE.equals(fgc) &amp;&amp; tipoRentabilidade.equals(TipoRentabilidade.POS) &amp;&amp; indice.equals(Indice.CDI))</b>
&nbsp;        {
<b class="fc">&nbsp;            return NivelRisco.BAIXO;</b>
&nbsp;        }
&nbsp;
<b class="pc">&nbsp;        if(tipo.equals(TipoProduto.CDB) &amp;&amp; Boolean.TRUE.equals(fgc) &amp;&amp;  tipoRentabilidade.equals(TipoRentabilidade.POS) &amp;&amp; indice.equals(Indice.IPCA))</b>
&nbsp;        {
<b class="nc">&nbsp;            return NivelRisco.MEDIO;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        int pontuacaoRisco = 0;</b>
&nbsp;        
&nbsp;        // 1. ANÁLISE FGC (Fundo Garantidor de Créditos) - Fator mais importante
<b class="fc">&nbsp;        if (Boolean.TRUE.equals(fgc)) {</b>
<b class="fc">&nbsp;            pontuacaoRisco += 0; // Garantia governamental = sem risco adicional</b>
&nbsp;        } else {
<b class="fc">&nbsp;            pontuacaoRisco += 30; // Sem garantia = risco significativo</b>
&nbsp;        }
&nbsp;
&nbsp;        // 3. ANÁLISE DE LIQUIDEZ - Capacidade de conversão em dinheiro
<b class="pc">&nbsp;        if (liquidez != null) {</b>
<b class="fc">&nbsp;            if (liquidez == -1) {</b>
<b class="fc">&nbsp;                pontuacaoRisco += 25; </b>
<b class="fc">&nbsp;            } else if (liquidez == 0) {</b>
<b class="fc">&nbsp;                pontuacaoRisco += 0;  </b>
<b class="fc">&nbsp;            } else if (liquidez &lt;= 30) {</b>
<b class="fc">&nbsp;                pontuacaoRisco += 5;  </b>
<b class="fc">&nbsp;            } else if (liquidez &lt;= 180) {</b>
<b class="fc">&nbsp;                pontuacaoRisco += 15; </b>
<b class="pc">&nbsp;            } else if (liquidez &lt;= 365) {</b>
<b class="fc">&nbsp;                pontuacaoRisco += 15; </b>
&nbsp;            } else {
<b class="nc">&nbsp;                pontuacaoRisco += 25; </b>
&nbsp;            }
&nbsp;        }
&nbsp;        
&nbsp;        //Volatilidade da taxa
<b class="fc">&nbsp;        if (tipoRentabilidade == TipoRentabilidade.POS) {</b>
<b class="fc">&nbsp;            pontuacaoRisco += 30;</b>
&nbsp;        }
&nbsp;
<b class="pc">&nbsp;        if (minimoDiasInvestimento != null &amp;&amp; minimoDiasInvestimento &gt; 0) {</b>
<b class="fc">&nbsp;            if (minimoDiasInvestimento &lt;= 30) {</b>
<b class="fc">&nbsp;                pontuacaoRisco += 0;</b>
<b class="fc">&nbsp;            } else if (minimoDiasInvestimento &lt;= 180) {</b>
<b class="fc">&nbsp;                pontuacaoRisco += 15;</b>
&nbsp;            } else {
<b class="fc">&nbsp;                pontuacaoRisco += 25;</b>
&nbsp;            }
&nbsp;        }
&nbsp;        		
&nbsp;        // 6. CLASSIFICAÇÃO FINAL baseada na pontuação total
<b class="fc">&nbsp;        if (pontuacaoRisco &lt;= 30) {</b>
<b class="fc">&nbsp;            return NivelRisco.BAIXO;</b>
<b class="fc">&nbsp;        } else if (pontuacaoRisco &lt;= 70) {</b>
<b class="fc">&nbsp;            return NivelRisco.MEDIO;</b>
&nbsp;        } else {
<b class="fc">&nbsp;            return NivelRisco.ALTO;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public double getPontuacao() {
<b class="fc">&nbsp;        return pontuacao;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setPontuacao(double pontuacao) {
<b class="fc">&nbsp;        this.pontuacao = pontuacao;</b>
&nbsp;    }
&nbsp;}
&nbsp;
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-11-19 07:07</div>
</div>
</body>
</html>
